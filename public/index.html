<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FinCEN's New Real Estate Reporting Rule</title>

    <meta name="description" content="Overview of FinCEN’s new AML reporting rule for residential real estate.">
    
    <meta property="og:title" content="Unmasking Real Estate Transactions">
    <meta property="og:description" content="Triggers, reporting cascade, and industry impact of FinCEN’s new rule.">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://yourdomain.com/preview.png">
    <meta property="og:url" content="https://yourdomain.com/">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Unmasking Real Estate Transactions">
    <meta name="twitter:description" content="FinCEN’s new AML reporting rule for residential real estate.">
    <meta name="twitter:image" content="https://yourdomain.com/preview.png">

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 20px;
            border-radius: 8px;
            width: 80%;
            max-width: 500px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .close-button {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        .close-button:hover,
        .close-button:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
    </style>
</head>
<body class="bg-[#EAF2F8]">
    <div class="container mx-auto p-4 md:p-8">
        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold text-[#004E89]">Unmasking Real Estate Transactions</h1>
            <p class="text-lg text-[#004E89] mt-2">An Overview of FinCEN's New Anti-Money Laundering Rule for Residential Real Estate</p>
        </header>

        <main>
            <section class="mb-12">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-5xl font-bold text-[#004E89]">Dec 1, 2025</h3>
                        <p class="text-gray-600 mt-2">Effective Date</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-5xl font-bold text-[#004E89]">$0</h3>
                        <p class="text-gray-600 mt-2">Minimum Price Threshold</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-5xl font-bold text-[#004E89]">111+</h3>
                        <p class="text-gray-600 mt-2">Data Fields in Report</p>
                    </div>
                </div>
            </section>

            <section class="mb-12 bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-3xl font-bold text-center text-[#004E89] mb-6">What Triggers a Report? The 4-Part Test</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                    <div>
                        <p class="text-gray-700 mb-4">A real estate transaction must be reported to FinCEN only if it meets all four of the following criteria. This new rule is designed to capture high-risk transactions that could be used for money laundering.</p>
                        <ul class="space-y-4">
                            <li class="flex items-start">
                                <span class="text-2xl text-[#407BA7] mr-4">&#127968;</span>
                                <div>
                                    <h4 class="font-semibold text-[#004E89]">Residential Property</h4>
                                    <p class="text-gray-600">Includes 1-4 family homes, condos, co-ops, and even vacant land intended for such construction.</p>
                                </div>
                            </li>
                            <li class="flex items-start">
                                <span class="text-2xl text-[#407BA7] mr-4">&#128184;</span>
                                <div>
                                    <h4 class="font-semibold text-[#004E89]">Non-Financed Transaction</h4>
                                    <p class="text-gray-600">All-cash deals or those with private financing from lenders without AML/SAR obligations.</p>
                                </div>
                            </li>
                            <li class="flex items-start">
                                <span class="text-2xl text-[#407BA7] mr-4">&#128188;</span>
                                <div>
                                    <h4 class="font-semibold text-[#004E89]">Transferee is an Entity or Trust</h4>
                                    <p class="text-gray-600">The buyer is an LLC, corporation, partnership, or trust, not an individual.</p>
                                </div>
                            </li>
                             <li class="flex items-start">
                                <span class="text-2xl text-[#407BA7] mr-4">&#128220;</span>
                                <div>
                                    <h4 class="font-semibold text-[#004E89]">No Exemption Applies</h4>
                                    <p class="text-gray-600">The transfer is not due to death, divorce, bankruptcy, or other specified low-risk events.</p>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div class="chart-container h-80 md:h-96">
                        <canvas id="reportableVsNonReportableChart"></canvas>
                    </div>
                </div>
            </section>

            <section class="mb-12 bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-3xl font-bold text-center text-[#004E89] mb-6">Who is Responsible for Reporting? The Cascade</h2>
                <p class="text-center text-gray-700 max-w-3xl mx-auto mb-8">The rule establishes a "reporting cascade" to identify the single party responsible for filing the Real Estate Report. The obligation falls to the professional who performs the function highest on the list, unless a written designation agreement is in place.</p>
                <div class="flex flex-col items-center">
                    <div class="w-full max-w-md">
                        <div class="bg-[#EAF2F8] p-4 rounded-lg shadow-inner mb-2 text-center">
                            <p class="font-bold text-[#004E89]">1. Closing or Settlement Agent</p>
                            <p class="text-sm text-gray-600">As listed on the settlement statement.</p>
                        </div>
                        <div class="text-center text-2xl text-[#407BA7]">&darr;</div>
                        <div class="bg-[#EAF2F8] p-4 rounded-lg shadow-inner my-2 text-center">
                            <p class="font-bold text-[#004E89]">2. Preparer of Settlement Statement</p>
                             <p class="text-sm text-gray-600">If no agent is listed on the statement.</p>
                        </div>
                        <div class="text-center text-2xl text-[#407BA7]">&darr;</div>
                        <div class="bg-[#EAF2F8] p-4 rounded-lg shadow-inner my-2 text-center">
                            <p class="font-bold text-[#004E89]">3. Filer of the Deed</p>
                             <p class="text-sm text-gray-600">The person who files the transfer instrument.</p>
                        </div>
                         <div class="text-center text-2xl text-[#407BA7]">&darr;</div>
                        <div class="bg-[#EAF2F8] p-4 rounded-lg shadow-inner mt-2 text-center">
                            <p class="font-bold text-[#004E89]">4. Title Insurance Underwriter</p>
                             <p class="text-sm text-gray-600">The company that underwrites the owner's policy.</p>
                        </div>
                    </div>
                </div>
            </section>

            <section class="mb-12">
                <h2 class="text-3xl font-bold text-center text-[#004E89] mb-6">Operational Impact on the Real Estate Industry</h2>
                 <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-2xl font-bold text-[#004E89] mb-4">Estimated First-Year Compliance Costs</h3>
                        <p class="text-gray-700 mb-4">FinCEN's own analysis projects a significant financial impact on the industry, primarily due to training, new procedures, and the time required to complete the detailed reports.</p>
                        <div class="chart-container h-64">
                            <canvas id="complianceCostChart"></canvas>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-2xl font-bold text-[#004E89] mb-4">Key Challenges for Professionals</h3>
                        <ul class="space-y-3 text-gray-700">
                           <li class="flex items-center"><span class="text-xl text-[#407BA7] mr-3">&#128203;</span> Data Acquisition & Verification</li>
                           <li class="flex items-center"><span class="text-xl text-[#407BA7] mr-3">&#128274;</span> Secure Handling of Sensitive Information</li>
                           <li class="flex items-center"><span class="text-xl text-[#407BA7] mr-3">&#9201;</span> Tight Reporting Deadlines</li>
                           <li class="flex items-center"><span class="text-xl text-[#407BA7] mr-3">&#9997;</span> Lack of Finalized Report Form</li>
                           <li class="flex items-center"><span class="text-xl text-[#407BA7] mr-3">&#9888;</span> Severe Penalties for Non-Compliance</li>
                        </ul>
                    </div>
                </div>
            </section>

            <section class="mb-12 bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-3xl font-bold text-center text-[#004E89] mb-6">✨ AI Compliance Assistant</h2>
                <p class="text-center text-gray-700 max-w-3xl mx-auto mb-8">Utilize our AI assistant to clarify compliance jargon or check the reportability of a hypothetical transaction.</p>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="p-4 bg-gray-50 rounded-lg shadow-inner">
                        <h3 class="text-xl font-semibold text-[#004E89] mb-3">Jargon Explainer ✨</h3>
                        <p class="text-gray-600 mb-4">Enter a term related to FinCEN or real estate compliance for a simplified explanation.</p>
                        <input type="text" id="jargonInput" placeholder="e.g., Beneficial Owner, Transferee Entity" class="w-full p-2 border border-gray-300 rounded-md focus:ring-[#407BA7] focus:border-[#407BA7] mb-3">
                        <button id="explainJargonBtn" class="w-full bg-[#004E89] text-white py-2 px-4 rounded-md hover:bg-[#407BA7] transition-colors duration-200">✨ Explain Term</button>
                        <div id="jargonOutput" class="mt-4 p-3 bg-white border border-gray-200 rounded-md text-gray-800 hidden"></div>
                        <div id="jargonLoader" class="hidden text-center mt-3 text-[#004E89]">Loading explanation...</div>
                    </div>

                    <div class="p-4 bg-gray-50 rounded-lg shadow-inner">
                        <h3 class="text-xl font-semibold text-[#004E89] mb-3">Reportability Checker ✨</h3>
                        <p class="text-gray-600 mb-4">Enter details of a transaction to see if it might be reportable under the new rule.</p>
                        <div class="space-y-3 mb-3">
                            <div>
                                <label for="propType" class="block text-sm font-medium text-gray-700">Property Type:</label>
                                <select id="propType" class="mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-[#407BA7] focus:border-[#407BA7]">
                                    <option value="residential">Residential (1-4 family, condo, vacant for res)</option>
                                    <option value="commercial">Commercial</option>
                                    <option value="mixed_use_non_res">Mixed-Use (primarily non-residential)</option>
                                </select>
                            </div>
                            <div>
                                <label for="financing" class="block text-sm font-medium text-gray-700">Financing:</label>
                                <select id="financing" class="mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-[#407BA7] focus:border-[#407BA7]">
                                    <option value="non-financed">Non-Financed (All-cash, private lender)</option>
                                    <option value="traditional_financed">Traditional Lender Financed</option>
                                </select>
                            </div>
                            <div>
                                <label for="transferee" class="block text-sm font-medium text-gray-700">Transferee (Buyer):</label>
                                <select id="transferee" class="mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-[#407BA7] focus:border-[#407BA7]">
                                    <option value="entity_trust">Legal Entity or Trust</option>
                                    <option value="individual">Individual</option>
                                </select>
                            </div>
                            <div>
                                <label for="exemption" class="block text-sm font-medium text-gray-700">Potential Exemption:</label>
                                <select id="exemption" class="mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-[#407BA7] focus:border-[#407BA7]">
                                    <option value="no">No specific exemption applies</option>
                                    <option value="death_divorce_bankruptcy">Death, Divorce, or Bankruptcy related</option>
                                    <option value="regulated_entity">Transferee is a highly regulated entity (e.g., bank)</option>
                                </select>
                            </div>
                        </div>
                        <button id="checkReportabilityBtn" class="w-full bg-[#004E89] text-white py-2 px-4 rounded-md hover:bg-[#407BA7] transition-colors duration-200">✨ Check Reportability</button>
                        <div id="reportabilityOutput" class="mt-4 p-3 bg-white border border-gray-200 rounded-md text-gray-800 hidden"></div>
                        <div id="reportabilityLoader" class="hidden text-center mt-3 text-[#004E89]">Analyzing transaction...</div>
                    </div>
                </div>
            </section>

            <section class="bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-3xl font-bold text-center text-[#004E89] mb-6">Legal and Legislative Headwinds</h2>
                <p class="text-center text-gray-700 max-w-3xl mx-auto mb-8">The rule faces significant opposition, creating uncertainty about its final form and implementation. Challenges have been mounted in both courts and Congress.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div>
                        <h3 class="text-2xl font-bold text-[#004E89] mb-4 text-center">Judicial Challenges</h3>
                        <div class="text-center mb-4">
                            <span class="text-6xl">&#9878;</span>
                        </div>
                        <p class="text-gray-700">Multiple lawsuits have been filed, arguing that FinCEN has exceeded its statutory authority under the Bank Secrecy Act. They claim the rule is "arbitrary and capricious" and raises constitutional concerns under the First and Fourth Amendments.</p>
                    </div>
                    <div>
                        <h3 class="text-2xl font-bold text-[#004E89] mb-4 text-center">Congressional Challenges</h3>
                         <div class="text-center mb-4">
                            <span class="text-6xl">&#127970;</span>
                        </div>
                        <p class="text-gray-700">Joint resolutions have been introduced in both the Senate and the House of Representatives aiming to disapprove of the rule and prevent it from taking effect, signaling political opposition to the new mandate.</p>
                    </div>
                </div>
            </section>
        </main>

        <footer class="text-center mt-12">
            <p class="text-sm text-gray-500">This infographic provides a summary of FinCEN's final rule on residential real estate transfers. Professionals should consult legal counsel for compliance guidance.</p>
        </footer>
    </div>

    <div id="jargonModal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h3 class="text-2xl font-bold text-[#004E89] mb-3" id="modalTitle"></h3>
            <p class="text-gray-700" id="modalText"></p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const brilliantBlues = {
                primary: '#004E89',
                secondary: '#407BA7',
                accent: '#8DB38B',
                light: '#EAF2F8',
                dark: '#1A2930'
            };

            const processLabel = (label) => {
                if (label.length <= 16) {
                    return label;
                }
                const words = label.split(' ');
                let lines = [];
                let currentLine = '';
                for (const word of words) {
                    if ((currentLine + word).length > 16) {
                        lines.push(currentLine.trim());
                        currentLine = '';
                    }
                    currentLine += word + ' ';
                }
                lines.push(currentLine.trim());
                return lines;
            };
            
            const tooltipTitleCallback = (tooltipItems) => {
                const item = tooltipItems[0];
                let label = item.chart.data.labels[item.dataIndex];
                if (Array.isArray(label)) {
                    return label.join(' ');
                } else {
                    return label;
                }
            };
            
            const commonTooltipOptions = {
                plugins: {
                    tooltip: {
                        callbacks: {
                            title: tooltipTitleCallback
                        }
                    }
                }
            };

            const reportableCtx = document.getElementById('reportableVsNonReportableChart').getContext('2d');
            new Chart(reportableCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Targeted High-Risk Transfers', 'All Other Real Estate Transfers'],
                    datasets: [{
                        label: 'Transaction Type',
                        data: [15, 85],
                        backgroundColor: [brilliantBlues.primary, brilliantBlues.secondary],
                        borderColor: '#ffffff',
                        borderWidth: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                        },
                        title: {
                            display: true,
                            text: 'Conceptual View: Targeting a Specific Transaction Type',
                            color: brilliantBlues.dark,
                            font: { size: 16 }
                        },
                        tooltip: commonTooltipOptions.plugins.tooltip
                    }
                }
            });

            const complianceCostCtx = document.getElementById('complianceCostChart').getContext('2d');
            new Chart(complianceCostCtx, {
                type: 'bar',
                data: {
                    labels: ['Low Estimate', 'High Estimate'],
                    datasets: [{
                        label: 'First-Year Cost (in Millions)',
                        data: [428.4, 690.4],
                        backgroundColor: [brilliantBlues.secondary, brilliantBlues.primary],
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    scales: {
                        x: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'USD (Millions)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: commonTooltipOptions.plugins.tooltip
                    }
                }
            });

            const jargonInput = document.getElementById('jargonInput');
            const explainJargonBtn = document.getElementById('explainJargonBtn');
            const jargonOutput = document.getElementById('jargonOutput');
            const jargonLoader = document.getElementById('jargonLoader');
            const jargonModal = document.getElementById('jargonModal');
            const modalTitle = document.getElementById('modalTitle');
            const modalText = document.getElementById('modalText');
            const closeButton = document.querySelector('.close-button');

            explainJargonBtn.addEventListener('click', async () => {
                const term = jargonInput.value.trim();
                if (!term) {
                    modalTitle.textContent = "Input Required";
                    modalText.textContent = "Please enter a term to explain.";
                    jargonModal.style.display = 'flex';
                    return;
                }

                jargonLoader.classList.remove('hidden');
                jargonOutput.classList.add('hidden');
                modalTitle.textContent = `Explaining: "${term}"`;
                modalText.textContent = "Generating explanation...";
                jargonModal.style.display = 'flex';

                try {
                    const prompt = `Explain the financial or real estate compliance term "${term}" in simple, easy-to-understand language for a general audience, in the context of FinCEN's real estate reporting rules. Keep the explanation concise.`;
                    
                    // Call your secure backend endpoint instead of the Google API directly
                    const response = await fetch('/api/explain-jargon', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ prompt: prompt })
                    });
                    
                    const result = await response.json();
                    
                    if (response.ok) {
                        modalText.textContent = result.text;
                    } else {
                        modalText.textContent = result.error || "Could not generate an explanation. Please try again or rephrase your term.";
                    }
                } catch (error) {
                    console.error("Error explaining jargon:", error);
                    modalText.textContent = "An error occurred while fetching the explanation. Please try again later.";
                } finally {
                    jargonLoader.classList.add('hidden');
                }
            });

            closeButton.addEventListener('click', () => {
                jargonModal.style.display = 'none';
            });

            window.addEventListener('click', (event) => {
                if (event.target == jargonModal) {
                    jargonModal.style.display = 'none';
                }
            });

            const propType = document.getElementById('propType');
            const financing = document.getElementById('financing');
            const transferee = document.getElementById('transferee');
            const exemption = document.getElementById('exemption');
            const checkReportabilityBtn = document.getElementById('checkReportabilityBtn');
            const reportabilityOutput = document.getElementById('reportabilityOutput');
            const reportabilityLoader = document.getElementById('reportabilityLoader');

            checkReportabilityBtn.addEventListener('click', async () => {
                const propTypeValue = propType.value;
                const financingValue = financing.value;
                const transfereeValue = transferee.value;
                const exemptionValue = exemption.value;

                reportabilityLoader.classList.remove('hidden');
                reportabilityOutput.classList.add('hidden');
                reportabilityOutput.innerHTML = '';

                try {
                    const prompt = `Assess the reportability of the following real estate transaction under FinCEN's new residential real estate reporting rule, and explain why.
                    Property Type: ${propTypeValue}
                    Financing: ${financingValue}
                    Transferee: ${transfereeValue}
                    Exemption: ${exemptionValue}

                    Based on these details, is this transaction likely reportable to FinCEN? Provide a clear "Yes, Reportable" or "No, Not Reportable" answer first, followed by a concise explanation that references the four core criteria of the rule.`;

                    // Call your secure backend endpoint instead of the Google API directly
                    const response = await fetch('/api/check-reportability', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ prompt: prompt })
                    });

                    const result = await response.json();

                    if (response.ok) {
                        reportabilityOutput.innerHTML = result.text;
                        reportabilityOutput.classList.remove('hidden');
                    } else {
                        reportabilityOutput.innerHTML = result.error || "Could not assess reportability. Please try again.";
                        reportabilityOutput.classList.remove('hidden');
                    }
                } catch (error) {
                    console.error("Error checking reportability:", error);
                    reportabilityOutput.innerHTML = "An error occurred while analyzing the transaction. Please try again later.";
                    reportabilityOutput.classList.remove('hidden');
                } finally {
                    reportabilityLoader.classList.add('hidden');
                }
            });
        });
    </script>
</body>
</html>
